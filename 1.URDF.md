# URDF — Deeper Understanding

A URDF (Unified Robot Description Format) is the foundational representation of a robot in ROS. Understanding it properly ensures your robot behaves correctly in Isaac Sim, Gazebo, and any physics engine.

This section explains every essential URDF component, joint math, inertia correctness, and how simulation tools interpret these values.

 URDF Anatomy

Every URDF file is made up of a few core elements:

<robot>

The root tag that wraps the entire definition.

```xml
<robot name="my_robot">
		<!-- links, joints, transmissions go here -->
</robot>
```

 `<link>` — Physical Body of the Robot

A link represents a rigid body with:

- visual geometry (what you see)
- collision geometry (what the physics engine collides with)
- inertial parameters (mass, inertia matrix, center of mass)

Example:

```xml
<link name="base_link">
	<visual>
		<geometry>
			<mesh filename="meshes/base_link.stl" scale="1 1 1" />
		</geometry>
		<origin xyz="0 0 0" rpy="0 0 0"/>
		<material name="gray" />
	</visual>

	<collision>
		<geometry>
			<box size="0.5 0.3 0.1" /> <!-- simplified collision geometry -->
		</geometry>
	</collision>

	<inertial>
		<mass value="4.0" />
		<origin xyz="0 0 0" />
		<inertia ixx="0.2" ixy="0" ixz="0" iyy="0.2" iyz="0" izz="0.3" />
	</inertial>
</link>
```

 `<joint>` — Connecting Links Together

Defines how two links move relative to each other.

Structure:

```xml
<joint name="joint1" type="revolute">
	<parent link="base_link" />
	<child link="link1" />
	<origin xyz="0 0 0.1" rpy="0 0 0" />
	<axis xyz="0 0 1" />
	<limit lower="-1.57" upper="1.57" effort="5" velocity="2"/>
</joint>
```

 Joint Types & Semantics

Understanding joint types is essential for correct Isaac Sim articulation behavior.

Joint Type — DOF — Meaning

- `revolute` — 1 — Rotates within limits
- `continuous` — 1 — Infinite rotation (wheels, LIDAR)
- `prismatic` — 1 — Linear motion
- `fixed` — 0 — Rigid attachment
- `floating` — 6 — Free-floating (rare in URDF)
- `planar` — 3 — Moves in 2D plane

Joint Axis Convention

The `<axis xyz="a b c"/>` defines the rotation or translation direction in the joint frame, not the world frame.

Example:

- `0 0 1` → rotate around Z-axis
- `1 0 0` → rotate around X-axis

Misaligned axes = broken motion in Isaac Sim.

 Mass & Inertia — The Most Important & Most Misunderstood Part

Incorrect inertia leads to:

- unstable simulation
- jittering robot
- oscillating arms
- objects tunneling through the floor

Why inertia matters

Physics engines compute motion based on: F = m \* a and rotational inertia.

If your inertia matrix is unrealistic (too small or zero), simulations explode.

Recommended workflow:

1. Use CAD exports → Fusion, SolidWorks, Onshape can compute correct MoI.
2. If not available → approximate using simple shapes: box, cylinder, sphere.

Include these formulas in `docs/urdf_deepdive.md` later.

 Collision vs Visual Geometry

To optimize simulation:

- visual mesh → full detail (.dae, .stl, .obj)
- collision mesh → simplify aggressively (low-poly, primitives)

Why?

- Faster collision detection
- More stable physics
- Better real-time performance in Isaac Sim

Example:

```xml
<visual>
	<geometry>
		<mesh filename="meshes/arm_highpoly.dae" />
	</geometry>
</visual>

<collision>
	<geometry>
		<cylinder radius="0.05" length="0.3" />
	</geometry>
</collision>
```

 Materials & Sensor Tags

You can specify colors or textures:

```xml
<material name="blue">
	<color rgba="0 0 1 1"/>
</material>
```

Common sensor tags (ROS ecosystem):

- `<gazebo>` tags for plugins
- ROS camera, IMU, Lidar plugin blocks

In Isaac Sim, these tags are ignored, but useful when dual‑simulating (Gazebo + Isaac).

 Annotated URDF Example

A compact but complete example:

```xml
<robot name="example_bot">

	<!-- BASE LINK -->
	<link name="base_link">
		<visual>
			<geometry>
				<box size="0.3 0.2 0.1" />
			</geometry>
		</visual>
		<collision>
			<geometry>
				<box size="0.3 0.2 0.1" />
			</geometry>
		</collision>
		<inertial>
			<mass value="2" />
			<inertia ixx="0.02" iyy="0.02" izz="0.03" ixy="0" ixz="0" iyz="0"/>
		</inertial>
	</link>

	<!-- WHEEL -->
	<link name="wheel_link" />

	<!-- REVOLUTE JOINT -->
	<joint name="wheel_joint" type="continuous">
		<parent link="base_link" />
		<child link="wheel_link" />
		<origin xyz="0 0 -0.05" />
		<axis xyz="0 0 1" />
	</joint>

</robot>
```


